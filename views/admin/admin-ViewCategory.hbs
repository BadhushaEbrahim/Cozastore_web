<body>
    <br>
    <a href="/admin/addCategories">
        <button style="width:180px; margin-left:50px" type="button" class="btn btn-primary">Add categories</button>
    </a> 
    <br>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">No</th>
                <th scope="col">CATEGORY</th>
                <th scope="col">SUB-CATEGORY</th>
                <th scope="col">Category-image</th>
                <th scope="col">OPTIONS</th>
            </tr>
        </thead>
        <tbody>
            {{#each categories}}
            <tr>
                <th scope="row">{{inc @index}}</th>
                <td>{{this.category}}</td>
                <td>{{this.subCategory}}</td>
                <td><img src="/category-images/{{this.image}}" style="width: 60px; height: 60px;"></td>
                <td>
                    <a href="/admin/editCategories?id={{this._id}}" class="btn btn-primary">EDIT</a>
                    <button class="btn btn-danger" onclick="confirmDelete('{{this._id}}', '{{this.category}}')">DELETE</button>
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>

    <script>
        function confirmDelete(categoryId, categoryName) {
            swal({
                title: "Confirm Delete",
                text: "Are you sure to delete " + categoryName + "?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            })
            .then((willDelete) => {
                if (willDelete) {
                    window.location.href = "/admin/deleteCategory/" + categoryId;
                }
            });
        }
    </script>
</body>
